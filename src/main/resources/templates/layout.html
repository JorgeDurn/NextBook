<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title layout:fragment="title">NextBook</title>

    <!-- Bootstrap CSS -->
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}" rel="stylesheet">
</head>

<body>

<nav class="navbar navbar-expand-lg" style="background-color: #4e73df;">
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="/img/logo.png" alt="NextBook" style="height:40px;">
        </a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link text-white" th:href="@{/usuarios}">Usuarios</a></li>
                <li class="nav-item"><a class="nav-link text-white" th:href="@{/libros}">Libros</a></li>
                <li class="nav-item"><a class="nav-link text-white" th:href="@{/categorias}">Categorías</a></li>
                <li class="nav-item"><a class="nav-link text-white" th:href="@{/prestamos}">Préstamos</a></li>
                <li class="nav-item"><a class="nav-link text-white" th:href="@{/devoluciones}">Devoluciones</a></li>
                <li class="nav-item"><a class="nav-link text-white" th:href="@{/sanciones}">Sanciones</a></li>
            </ul>

            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <span class="navbar-text text-white me-3">
                    Bienvenido, <span th:text="${#authentication.name}">Usuario</span>
                </span>
                <a class="btn btn-outline-light me-2" th:href="@{/cambiar-contrasena}">Cambiar contraseña</a>
                <form th:action="@{/logout}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-link p-0" style="text-decoration: underline; color: white; background: none; border: none;">
                        Cerrar sesión
                    </button>
                </form>
            </th:block>
        </div>
    </div>
</nav>

<!-- Mensajes globales -->
<div class="container mt-3">
    <div th:if="${mensaje}" class="alert alert-success" th:text="${mensaje}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
</div>

<!-- Contenido dinámico -->
<div class="container mt-4">
    <section layout:fragment="content">
        <!-- Aquí se renderizará el contenido de cada página -->
    </section>
</div>

<!-- Bootstrap JS -->
<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js}"></script>

</body>
</html>
